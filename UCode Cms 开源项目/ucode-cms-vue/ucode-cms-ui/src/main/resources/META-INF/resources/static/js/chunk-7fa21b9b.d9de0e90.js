(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7fa21b9b","chunk-005cb0c7"],{"4b72":function(e,t,a){"use strict";a.d(t,"f",(function(){return r})),a.d(t,"e",(function(){return l})),a.d(t,"c",(function(){return i})),a.d(t,"j",(function(){return o})),a.d(t,"d",(function(){return s})),a.d(t,"h",(function(){return u})),a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return m})),a.d(t,"g",(function(){return d})),a.d(t,"i",(function(){return h}));var n=a("b775");function r(e){return Object(n["a"])({url:"/auto/code/table/page",method:"get",params:e})}function l(e){return Object(n["a"])({url:"/tool/gen/db/list",method:"get",params:e})}function i(e){return Object(n["a"])({url:"/tool/gen/"+e,method:"get"})}function o(e){return Object(n["a"])({url:"/tool/gen",method:"put",data:e})}function s(e){return Object(n["a"])({url:"/tool/gen/importTable",method:"post",params:e})}function u(e){return Object(n["a"])({url:"/tool/gen/preview/"+e,method:"get"})}function c(e){return Object(n["a"])({url:"/tool/gen/"+e,method:"delete"})}function m(e){return Object(n["a"])({url:"/auto/code/table/gen?tableName="+e,method:"get"})}function d(e){return Object(n["a"])({url:"/auto/code/modify/column?tableNames="+e,method:"get"})}function h(e){return Object(n["a"])({url:"/tool/gen/synchDb/"+e,method:"get"})}},"6f72":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{visible:e.visible,"append-to-body":"",title:"导入表",top:"5vh",width:"800px"},on:{"update:visible":function(t){e.visible=t}}},[a("el-form",{ref:"queryForm",attrs:{inline:!0,model:e.queryParams}},[a("el-form-item",{attrs:{label:"表名称",prop:"tableName"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入表名称",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.tableName,callback:function(t){e.$set(e.queryParams,"tableName",t)},expression:"queryParams.tableName"}})],1),a("el-form-item",{attrs:{label:"表描述",prop:"tableComment"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入表描述",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.tableComment,callback:function(t){e.$set(e.queryParams,"tableComment",t)},expression:"queryParams.tableComment"}})],1),a("el-form-item",[a("el-button",{attrs:{icon:"el-icon-search",size:"mini",type:"primary"},on:{click:e.handleQuery}},[e._v("搜索 ")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置 ")])],1)],1),a("el-row",[a("el-table",{ref:"table",attrs:{data:e.dbTableList,height:"260px"},on:{"row-click":e.clickRow,"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"表名称",prop:"tableName"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"表描述",prop:"tableComment"}}),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime"}}),a("el-table-column",{attrs:{label:"更新时间",prop:"updateTime"}})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{limit:e.queryParams.size,page:e.queryParams.current,total:e.total},on:{"update:limit":function(t){return e.$set(e.queryParams,"size",t)},"update:page":function(t){return e.$set(e.queryParams,"current",t)},pagination:e.getList}})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.handleImportTable}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取 消")])],1)],1)},r=[],l=(a("d81d"),a("a15b"),a("4b72")),i={data:function(){return{visible:!1,tables:[],total:0,dbTableList:[],queryParams:{current:1,size:10,tableName:void 0,tableComment:void 0}}},methods:{show:function(){this.getList(),this.visible=!0},clickRow:function(e){this.$refs.table.toggleRowSelection(e)},handleSelectionChange:function(e){this.tables=e.map((function(e){return e.tableName}))},getList:function(){var e=this;Object(l["e"])(this.queryParams).then((function(t){200===t.code&&(e.dbTableList=t.rows,e.total=t.total)}))},handleQuery:function(){this.queryParams.current=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleImportTable:function(){var e=this,t=this.tables.join(",");""!=t?Object(l["d"])({tables:t}).then((function(t){e.$modal.msgSuccess(t.msg),200===t.code&&(e.visible=!1,e.$emit("ok"))})):this.$modal.msgError("请选择要导入的表")}}},o=i,s=a("2877"),u=Object(s["a"])(o,n,r,!1,null,null,null);t["default"]=u.exports},"82c8":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{inline:!0,model:e.queryParams,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"表名称",prop:"tableName"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入表名称",size:"small","auto-complete":""},on:{change:e.handleQuery},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.tableName,callback:function(t){e.$set(e.queryParams,"tableName",t)},expression:"queryParams.tableName"}})],1),a("el-form-item",{attrs:{label:"表描述",prop:"tableComment"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入表描述",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.tableComment,callback:function(t){e.$set(e.queryParams,"tableComment",t)},expression:"queryParams.tableComment"}})],1),a("el-form-item",{attrs:{label:"创建时间"}},[a("el-date-picker",{staticStyle:{width:"240px"},attrs:{"end-placeholder":"结束日期","range-separator":"-",size:"small","start-placeholder":"开始日期",type:"daterange","value-format":"yyyy-MM-dd"},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),a("el-form-item",[a("el-button",{attrs:{icon:"el-icon-search",size:"mini",type:"primary"},on:{click:e.handleQuery}},[e._v("搜索 ")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置 ")])],1)],1),a("el-row",{staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{icon:"el-icon-download",plain:"",size:"mini",type:"primary"},on:{click:e.handleGenTable}},[e._v("生成 ")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.tableList},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"55"}}),a("el-table-column",{attrs:{align:"center",label:"序号",type:"index",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s((e.queryParams.current-1)*e.queryParams.size+t.$index+1))])]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,align:"left",label:"表名称",prop:"tableName",width:"250"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,align:"center",label:"表描述",prop:"tableComment",width:"300"}}),a("el-table-column",{attrs:{align:"center",label:"创建时间",prop:"createTime",width:"160"}}),a("el-table-column",{attrs:{align:"center",label:"更新时间",prop:"updateTime",width:"160"}}),a("el-table-column",{attrs:{align:"center","class-name":"small-padding fixed-width",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{icon:"el-icon-download",size:"small",type:"text"},on:{click:function(a){return e.handleGenTable(t.row)}}},[e._v("生成代码 ")])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{limit:e.queryParams.size,page:e.queryParams.current,total:e.total,"page-sizes":[10,20,50,100,200,500]},on:{"update:limit":function(t){return e.$set(e.queryParams,"size",t)},"update:page":function(t){return e.$set(e.queryParams,"current",t)},pagination:e.getList}}),a("el-dialog",{staticClass:"scrollbar",attrs:{title:e.preview.title,visible:e.preview.open,"append-to-body":"",top:"5vh",width:"80%"},on:{"update:visible":function(t){return e.$set(e.preview,"open",t)}}},[a("el-tabs",{model:{value:e.preview.activeName,callback:function(t){e.$set(e.preview,"activeName",t)},expression:"preview.activeName"}},e._l(e.preview.data,(function(t,n){return a("el-tab-pane",{key:n,attrs:{label:n.substring(n.lastIndexOf("/")+1,n.indexOf(".vm")),name:n.substring(n.lastIndexOf("/")+1,n.indexOf(".vm"))}},[a("pre",[a("code",{staticClass:"hljs",domProps:{innerHTML:e._s(e.highlightedCode(t,n))}})])])})),1)],1),a("import-table",{ref:"import",on:{ok:e.handleQuery}})],1)},r=[],l=(a("a9e3"),a("d81d"),a("4b72")),i=a("6f72"),o=a("a70e"),s=a.n(o),u=(a("b11d"),{name:"Gen",components:{importTable:i["default"]},data:function(){return{loading:!0,uniqueId:"",ids:[],tableNames:[],single:!0,multiple:!0,showSearch:!0,total:0,tableList:[],dateRange:"",queryParams:{current:1,size:50,tableName:void 0,tableComment:void 0},preview:{open:!1,title:"代码预览",data:{},activeName:"domain.java"}}},created:function(){this.getList()},activated:function(){var e=this.$route.query.t;null!=e&&e!=this.uniqueId&&(this.uniqueId=e,this.queryParams.current=Number(this.$route.query.current),this.getList())},methods:{getList:function(){var e=this;this.loading=!0,Object(l["f"])(this.addDateRange(this.queryParams,this.dateRange)).then((function(t){e.tableList=t.data.records,e.total=t.data.total,e.loading=!1}))},handleQuery:function(){this.queryParams.current=1,this.getList()},handleGenTable:function(e){var t=this,a=e.tableName||this.tableNames;""!=a?Object(l["b"])(a).then((function(e){t.$modal.msgSuccess("成功生成到自定义路径")})):this.$modal.msgError("请选择要生成的数据")},handleTableCommonField:function(e){var t=this,a=e.tableName||this.tableNames;""!=a?Object(l["g"])(a).then((function(e){t.$modal.msgSuccess("通用表属性修改成功")})):this.$modal.msgError("请选择要修改的表名")},handleSynchDb:function(e){var t=this,a=e.tableName;this.$modal.confirm('确认要强制同步"'+a+'"表结构吗？').then((function(){return Object(l["i"])(a)})).then((function(){t.$modal.msgSuccess("同步成功")})).catch((function(){}))},openImportTable:function(){this.$refs.import.show()},resetQuery:function(){this.dateRange=[],this.resetForm("queryForm"),this.handleQuery()},handlePreview:function(e){var t=this;Object(l["h"])(e.tableId).then((function(e){t.preview.data=e.data,t.preview.open=!0,t.preview.activeName="domain.java"}))},highlightedCode:function(e,t){var a=t.substring(t.lastIndexOf("/")+1,t.indexOf(".vm")),n=a.substring(a.indexOf(".")+1,a.length),r=s.a.highlight(n,e||"",!0);return r.value||"&nbsp;"},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.tableId})),this.tableNames=e.map((function(e){return e.tableName})),this.single=1!=e.length,this.multiple=!e.length},handleEditTable:function(e){var t=e.tableId||this.ids[0];this.$router.push({path:"/tool/gen-edit/index",query:{tableId:t,current:this.queryParams.current}})},handleDelete:function(e){var t=this,a=e.tableId||this.ids;this.$modal.confirm('是否确认删除表编号为"'+a+'"的数据项？').then((function(){return Object(l["a"])(a)})).then((function(){t.getList(),t.$modal.msgSuccess("删除成功")})).catch((function(){}))}}}),c=u,m=a("2877"),d=Object(m["a"])(c,n,r,!1,null,null,null);t["default"]=d.exports}}]);